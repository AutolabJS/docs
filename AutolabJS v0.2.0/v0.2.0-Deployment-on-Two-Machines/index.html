
<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="shortcut icon" href="../../assets/images/favicon.png">
      
      <meta name="generator" content="mkdocs-0.16.3, mkdocs-material-1.7.1">
    
    
      
        <title>On two machines - AutolabJS</title>
      
    
    
      <script src="../../assets/javascripts/modernizr-1df76c4e58.js"></script>
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application-f98ca285f9.css">
      
    
    
      
        
        
        
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
    
  </head>
  
  
  
  
    <body>
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <a href="../.." title="AutolabJS" class="md-icon md-icon--home md-header-nav__button">
          </a>
        
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <span class="md-flex__ellipsis md-header-nav__title">
          
            
              
                <span class="md-header-nav__parent">
                  AutolabJS v0.2.0
                </span>
              
                <span class="md-header-nav__parent">
                  Deployment Tutorial
                </span>
              
            
            On two machines
          
        </span>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
          
<div class="md-search" data-md-component="search">
  <label class="md-search__overlay" for="search"></label>
  <div class="md-search__inner">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" required placeholder="Search" accesskey="s" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query">
      <label class="md-icon md-search__icon" for="search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset">close</button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result" data-md-lang-search="">
          <div class="md-search-result__meta" data-md-lang-result-none="No matching documents" data-md-lang-result-one="1 matching document" data-md-lang-result-other="# matching documents">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <div class="md-header-nav__source">
          
        </div>
      </div>
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    
      <i class="md-icon md-icon--home md-nav__button"></i>
    
    AutolabJS
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2" checked>
    
    <label class="md-nav__link" for="nav-2">
      AutolabJS
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        AutolabJS
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../AutolabJS/" title="Home" class="md-nav__link">
      Home
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-2" type="checkbox" id="nav-2-2">
    
    <label class="md-nav__link" for="nav-2-2">
      AutolabJS v0.1.0
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-2">
        AutolabJS v0.1.0
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../AutolabJS v0.1.0/AutolabJS-v010/" title="Home" class="md-nav__link">
      Home
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-2-2" type="checkbox" id="nav-2-2-2">
    
    <label class="md-nav__link" for="nav-2-2-2">
      Deployment Tutorial
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-2-2-2">
        Deployment Tutorial
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../AutolabJS v0.1.0/v0.1-Deploying-using-Docker/" title="Deployment-on-Single-Machine" class="md-nav__link">
      Deployment-on-Single-Machine
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../AutolabJS v0.1.0/v0.1-Two-Machines/" title="On two machines" class="md-nav__link">
      On two machines
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../AutolabJS v0.1.0/v0.1-On-Azure-Cloud/" title="On Azure cloud" class="md-nav__link">
      On Azure cloud
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../AutolabJS v0.1.0/v0.1-JSON-files-documetation/" title="JSON details" class="md-nav__link">
      JSON details
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-2-3" type="checkbox" id="nav-2-2-3">
    
    <label class="md-nav__link" for="nav-2-2-3">
      Tutorials for Lab Authors
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-2-2-3">
        Tutorials for Lab Authors
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../AutolabJS v0.1.0/v0.1-Creating-and-Modifying-a-lab/" title="Creating a Lab" class="md-nav__link">
      Creating a Lab
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../AutolabJS v0.1.0/v0.1-Automate-Lab-Create-Update-Delete-Activities/" title="Automate lab/user" class="md-nav__link">
      Automate lab/user
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-2-4" type="checkbox" id="nav-2-2-4">
    
    <label class="md-nav__link" for="nav-2-2-4">
      Tutorials for Students
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-2-2-4">
        Tutorials for Students
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../AutolabJS v0.1.0/v0.1-Making-a-Submission/" title="Making a Submission" class="md-nav__link">
      Making a Submission
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../AutolabJS v0.1.0/v0.1-Post-lab-self-evaluation/" title="Post lab self evaluation" class="md-nav__link">
      Post lab self evaluation
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-3" type="checkbox" id="nav-2-3" checked>
    
    <label class="md-nav__link" for="nav-2-3">
      AutolabJS v0.2.0
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-3">
        AutolabJS v0.2.0
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../AutolabJS-v020/" title="Home" class="md-nav__link">
      Home
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-3-2" type="checkbox" id="nav-2-3-2" checked>
    
    <label class="md-nav__link" for="nav-2-3-2">
      Deployment Tutorial
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-2-3-2">
        Deployment Tutorial
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../v0.2.0-Deployment-on-Single-Machine/" title="Deployment-on-Single-Machine" class="md-nav__link">
      Deployment-on-Single-Machine
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        On two machines
      </label>
    
    <a href="./" title="On two machines" class="md-nav__link md-nav__link--active">
      On two machines
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#prerequisite" title="Prerequisite" class="md-nav__link">
    Prerequisite
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#on-machine-1" title="On Machine 1" class="md-nav__link">
    On Machine 1
  </a>
  
</li>
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../v0.2.0-On-Azure-Cloud/" title="On Azure cloud" class="md-nav__link">
      On Azure cloud
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../v0.2.0-Container-Maintenance/" title="Container Maintenance" class="md-nav__link">
      Container Maintenance
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../v0.2.0-JSON-files-documetation/" title="JSON details" class="md-nav__link">
      JSON details
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../v0.2.0-Uninstall-Autolab/" title="Uninstall AutolabJS" class="md-nav__link">
      Uninstall AutolabJS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-3-2-7" type="checkbox" id="nav-2-3-2-7">
    
    <label class="md-nav__link" for="nav-2-3-2-7">
      FAQ
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-2-3-2-7">
        FAQ
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../FAQs/v0.2.0-Student-FAQs/" title="Student" class="md-nav__link">
      Student
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../FAQs/v0.2.0-Instructor-FAQs/" title="Instructor" class="md-nav__link">
      Instructor
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../FAQs/v0.2.0-Administrator-FAQs/" title="Administrator" class="md-nav__link">
      Administrator
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-3-3" type="checkbox" id="nav-2-3-3">
    
    <label class="md-nav__link" for="nav-2-3-3">
      Tutorials for Lab Authors
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-2-3-3">
        Tutorials for Lab Authors
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../v0.2.0-Using-Autolab-in-a-Course/" title="Using AutolabJS-Initial Configuration" class="md-nav__link">
      Using AutolabJS-Initial Configuration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-3-3-2" type="checkbox" id="nav-2-3-3-2">
    
    <label class="md-nav__link" for="nav-2-3-3-2">
      Creating a Lab
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-2-3-3-2">
        Creating a Lab
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../v0.2.0-Creating-and-Modifying-a-lab/" title="Home" class="md-nav__link">
      Home
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../v0.2.0-Creating-Labs-for-JUnit-Tests/" title="JUnit-based labs" class="md-nav__link">
      JUnit-based labs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-3-3-2-3" type="checkbox" id="nav-2-3-3-2-3">
    
    <label class="md-nav__link" for="nav-2-3-3-2-3">
      Input-Output (IO) tests using
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-2-3-3-2-3">
        Input-Output (IO) tests using
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../v0.2.0-Creating-Labs-for-IO-Tests-with-Source-Code/" title="Source code" class="md-nav__link">
      Source code
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../v0.2.0-Creating-Labs-for-IO-Tests-with-Compiled-Binaries/" title="Compiled binaries" class="md-nav__link">
      Compiled binaries
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../v0.2.0-Manage-Course/" title="Manage Course" class="md-nav__link">
      Manage Course
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-3-4" type="checkbox" id="nav-2-3-4">
    
    <label class="md-nav__link" for="nav-2-3-4">
      Tutorials for Students
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-2-3-4">
        Tutorials for Students
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-3-4-1" type="checkbox" id="nav-2-3-4-1">
    
    <label class="md-nav__link" for="nav-2-3-4-1">
      Making a Submission
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="4">
      <label class="md-nav__title" for="nav-2-3-4-1">
        Making a Submission
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../v0.2.0-Making-a-Submission/" title="Home" class="md-nav__link">
      Home
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../v0.2.0-Unit-Tests/" title="Unit tests" class="md-nav__link">
      Unit tests
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-3-4-1-3" type="checkbox" id="nav-2-3-4-1-3">
    
    <label class="md-nav__link" for="nav-2-3-4-1-3">
      Input-Output (IO) tests using
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-2-3-4-1-3">
        Input-Output (IO) tests using
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../v0.2.0-IO-Tests/" title="Source code" class="md-nav__link">
      Source code
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../v0.2.0-IO-Tests-Binaries/" title="Compiled binaries" class="md-nav__link">
      Compiled binaries
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../v0.2.0-Post-lab-self-evaluation/" title="Post lab self evaluation" class="md-nav__link">
      Post lab self evaluation
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../AutolabJS-coding-standards/" title="AutloabJS Coding Standards" class="md-nav__link">
      AutloabJS Coding Standards
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../autolabcli/" title="AutolabCLI" class="md-nav__link">
      AutolabCLI
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../docs/" title="Documentation" class="md-nav__link">
      Documentation
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../website/" title="AutolabWebsite" class="md-nav__link">
      AutolabWebsite
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#prerequisite" title="Prerequisite" class="md-nav__link">
    Prerequisite
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#on-machine-1" title="On Machine 1" class="md-nav__link">
    On Machine 1
  </a>
  
</li>
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                  <h1>On two machines</h1>
                
                <h2 id="prerequisite">Prerequisite</h2>
<ol>
<li>Ubuntu server 16.04 operating system.</li>
<li>
<p>Record the Domain names, Public and Private IP Addresses and Login Credentials of both the machines. Let label the IP addresses as follows.</p>
<table>
<thead>
<tr>
<th>Machine</th>
<th align="center">Public IP</th>
<th align="center">Private IP</th>
</tr>
</thead>
<tbody>
<tr>
<td>Front-End-and-LB</td>
<td align="center">Public_IP_1</td>
<td align="center">Private_IP_1</td>
</tr>
<tr>
<td>Execution-Nodes</td>
<td align="center">Public_IP_2</td>
<td align="center">Private_IP_2</td>
</tr>
</tbody>
</table>
<p>Because of ease of use, domain names (DNS) are a preferred option for hostnames in all the configuration files. If you have domain names for the machines, you can use the domain names in the place of IP addresses in all the configuration files.  <br />
Most likely, your machine may be on a corporate private network with a gateway / proxy server / firewall connection to Internet. In that case, please use your machine's private ip address.  <br />
You can locate the configured IP address of your machine using the following command.  <br />
<code>ip addr show</code>
in the displayed output, look for IP address following the <strong>inet</strong> keyword.</p>
</li>
<li>
<p>Change the listening port of SSH server to 2222 in /etc/ssh/sshd_config file and restart the SSH server using
the following command.  <br />
<code>sudo service ssh restart</code>   <br />
    If the SSH server is not running on your machine, please ignore the rest of this section and directly go to <strong><a href="#on-machine-1">On Machine 1</a></strong> section.</p>
</li>
<li>For the SSH setting to be fully effective, logout of the current SSH session and relogin.</li>
<li>From Machine 1, SSH into Machine 2 using its Private IP once to add the SSH server public key of Machine 2  to <code>~/.ssh/known_hosts</code> in Machine 1.</li>
</ol>
<h2 id="on-machine-1">On Machine 1</h2>
<ol>
<li>Create SSH config file (~/.ssh/config) with the following contents.  <br />
<code>Host *</code>  <br />
        &nbsp;&nbsp;&nbsp;&nbsp; <code>StrictHostKeyChecking no</code>  <br />
        &nbsp;&nbsp;&nbsp;&nbsp; <code>UserKnownHostsFile=/dev/null</code></li>
<li>Create ansible config file (~/.ansible.cfg) with the following contents  <br />
<code>[defaults]</code>  <br />
<code>host_key_checking = False</code>    </li>
<li>Clone Repository  <br />
<code>git clone https://github.com/AutolabJS/AutolabJS</code></li>
<li>Change to deploy directory  <br />
<code>cd AutolabJS/deploy</code></li>
<li>Execute setup script  <br />
<code>./setup.sh</code></li>
<li>Configure the AutolabJS components by editing the configuration files in <code>deploy/configs/&lt;component&gt;</code>. Note that you need to use the Private IP of the machines wherever required.  <br />
The list of configuration files to be changed are:  <br />
<strong>deploy/configs/main_server:</strong> APIKeys.json, conf.json, courses.json, labs.json  <br />
<strong>deploy/configs/load_balancer:</strong> nodes_data_conf.json  <br />
<strong>deploy/configs/execution_nodes:</strong> scores.json, conf.json    </li>
<li>
<p>Edit the ansible inventory file. You can find the <em>inventory</em> in <code>AutolabJS/deploy</code> directory.</p>
<ol>
<li>
<p>Update the credentials as required. Please make sure that the changed passwords match in both the inventory file and the configuration files. <br />
 The locations of credentials are:    </p>
<table>
<thead>
<tr>
<th>File</th>
<th align="center">MySQL</th>
<th align="center">GitLab</th>
<th align="center">Main Server</th>
</tr>
</thead>
<tbody>
<tr>
<td>deploy/inventory</td>
<td align="center">&#10004;</td>
<td align="center">&#10004;</td>
<td align="center"></td>
</tr>
<tr>
<td>deploy/configs/main_server/APIKeys.json</td>
<td align="center"></td>
<td align="center"></td>
<td align="center">&#10004; (for /admin route)</td>
</tr>
<tr>
<td>deploy/configs/main_server/conf.json</td>
<td align="center">&#10004;</td>
<td align="center">&#10004;</td>
<td align="center"></td>
</tr>
<tr>
<td>deploy/configs/load_balancer/nodes_data_conf.json</td>
<td align="center">&#10004;</td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>In the <code>gitlab</code> section of inventory file, change the hostname of <strong>gitlab</strong> item from <strong>localhost</strong> to <strong>Public IP</strong>. The line should look like  <br />
```
[gitlab]    </p>
</li>
</ol>
<p><Public_IP_1> ansible_connection=local ansible_python_interpreter=/usr/bin/python2 gitlab_password=<gitlab_password>
```
The only exception to the use of private IP is given in the above line. If your Gitlab installation runs on a computer with one public IP address and one private IP address, use the public_IP_1 address in the above line. Otherwise, use private_IP_1 address.    </p>
</li>
<li>
<p>In the <code>loadbalancer</code> section of inventory file, change <strong>gitlab_hostname</strong> variable in loadbalancer group to <strong>Private IP</strong> of Machine 1.  <br />
    ```
    [loadbalancer]    </p>
<p>localhost ansible_connection=local ansible_python_interpreter=/usr/bin/python2 submissions_dir=../load_balancer/submissions gitlab_hostname=<Private_IP_1> gitlab_password=12345678
<code>4. In the `executionnodes` section of inventory file, change the hostname of **executionnode** item to **Private IP** of Execution Node and change gitlab_hostname variable to **Private IP** of Machine 1. The connection to execution nodes is changed from localhost to ssh. The line should look like</code>
[executionnodes]    </p>
<p><Private_IP_2> ansible_connection=ssh ansible_user=<machine2_user> ansible_password=<machine2_ssh_password> ansible_python_interpreter=/usr/bin/python2 gitlab_hostname=<Private_IP_1> gitlab_password=12345678 port=8082
<code>``
1. Run the ansible-playbook</code>sudo ansible-playbook -i inventory playbook.yml -u <username2> --ask-sudo-pass`  <br />
   The username and the password to be provided are the credentials of root user of <strong>machine2</strong>.</p>
</li>
<li>
<p>Ansible installs all the components of AutolabJS. If the previous step executes successfully, the <strong>installation is complete</strong>.</p>
</li>
<li>
<p>Add cron job to restart the AutolabJS components automatically. You need to do this on both the machines.</p>
<ol>
<li>Login as root  <br />
<code>sudo su</code></li>
<li>Copy restart script to root account on both the machines <br />
<code>cp deploy/autolab-restart.sh /root/</code>  <br />
   You need to use <code>sftp</code> to copy autolab-restart.sh script to machine2.</li>
<li>Open crontab editor as root user  <br />
<code>crontab -e</code></li>
<li>Enter a job in the file to run the restart script every minute.  <br />
<code>* * * * *    bash /root/autolab-restart.sh</code></li>
</ol>
</li>
<li>
<p>In case of installation failure due to incorrect configuration, please see the <a href="../FAQs/v0.2.0-Student-FAQs/">FAQ</a> page to see if you can resolve the error. If not, you can run the following commands to uninstall AutolabJS.   </p>
<ol>
<li>
<p>The uninstall command is:  <br />
<code>sudo ansible-playbook -i inventory uninstall.yml -u &lt;username2&gt; --ask-sudo-pass</code>  <br />
   The username and the password to be provided are the credentials of root user of <strong>machine2</strong>.</p>
</li>
<li>
<p>Remove the previously generated SSH keys  <br />
<code>rm -f AutolabJS/deploy/keys/main_server/*</code>  <br />
<code>rm -f AutolabJS/deploy/keys/load_balancer/id_rsa*</code>    </p>
</li>
<li>
<p>Check the configuration done in steps - (6), (7) and Repeat the installation step-(8) given above.</p>
</li>
</ol>
</li>
<li>
<p>After successful installation, delete SSH and ansible configuration files.  <br />
<code>rm ~/.ssh/config ~/.ansible.cfg</code></p>
</li>
<li>
<p>Installation creates containers for main server, load balancer, execution node, data base and Gitlab. For further information on managing these containers see <a href="../v0.2.0-Container-Maintenance/">container maintenance</a> page.</p>
</li>
</ol>
                
                  
                
              
              
                
              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../v0.2.0-Deployment-on-Single-Machine/" title="Deployment-on-Single-Machine" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Deployment-on-Single-Machine
              </span>
            </div>
          </a>
        
        
          <a href="../v0.2.0-On-Azure-Cloud/" title="On Azure cloud" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                On Azure cloud
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="http://www.mkdocs.org" title="MkDocs">MkDocs</a>
        and
        <a href="http://squidfunk.github.io/mkdocs-material/" title="Material for MkDocs">
          Material for MkDocs</a>
      </div>
      
        
  <div class="md-footer-social">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    
      <a href="" class="md-footer-social__link fa fa-github"></a>
    
  </div>

      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application-e3caa82af6.js"></script>
      
      
      <script>app.initialize({url:{base:"../.."}})</script>
      
    
    
      
    
  </body>
</html>